<!DOCTYPE html>
<html lang="bn-BD">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>amm rupali</title>
    <style>
        /* General Styles */
        body {
            font-family: 'Hind Siliguri', 'Noto Sans Bengali', Arial, sans-serif;
            margin: 0;
            padding: 0;
            line-height: 1.6;
            color: #333;
            background-color: #f9f9f9;
            overflow-x: hidden;
        }
        .container {
            width: 90%;
            max-width: 1100px;
            margin: 0 auto;
            padding: 20px 0;
        }
        .container-for-title {
            width: 90%;
            max-width: 1100px;
            margin: 0 auto;
            padding: 20px 0;
        }
        h1, h2, h3 {
            color: #2c3e50;
            margin-bottom: 15px;
        }
        p {
            margin-bottom: 10px;
        }
        .btn {
            display: inline-block;
            background-color: #F16334;
            color: #fff;
            padding: 10px 20px;
            text-decoration: none;
            border-radius: 5px;
            font-weight: bold;
            transition: background-color 0.3s ease;
            cursor: pointer;
            border: none;
        }
        .btn:hover {
            background-color: #d85429;
        }
        .btn:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }
        img {
            max-width: 100%;
            height: auto;
            display: block;
        }
        section {
            padding: 0; 
            text-align: center;
        }
        section.padded-section .container-for-title,
        section.padded-section .container {
            padding-top: 40px;
            padding-bottom: 40px;
        }
        .checkout-form-section .container-for-title {
             padding-top: 20px;
             padding-bottom: 40px;
        }
        .title-fullwidth-accent { 
            background-color: #F16334;
            color: #fff !important;
            padding: 15px 25px;       
            text-align: center;
            font-size: 1.6em;          
            border-radius: 8px;        
            width: auto;               
            max-width: 90%;            
            margin-top: 20px;          
            margin-bottom: 30px;
            margin-left: auto;         
            margin-right: auto;        
            box-sizing: border-box;    
        }

        .hero-section {
            background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('img/B1.jpg') no-repeat center center/cover;
            color: #fff;
            padding: 80px 0; 
            text-align: center;
        }
        .hero-section .container h1 { 
             font-size: 2.8em; margin-bottom: 20px; color: #fff; 
        }
        .hero-section .container p { font-size: 1.2em; margin-bottom: 30px; }

        .product-availability img {
            margin: 20px auto; border: 1px solid #ddd;
            border-radius: 5px; max-width: 700px;
        }
        .product-gallery-section { padding-top: 0; padding-bottom: 40px; text-align: center; }
        .slider-container {
            position: relative; width: 100%; max-width: 900px; 
            margin: 0 auto 20px auto; overflow: hidden;
        }
        .slider-wrapper {
            display: flex; transition: transform 0.7s cubic-bezier(0.65, 0, 0.35, 1);
            will-change: transform;
        }
        .slide {
            flex: 0 0 calc((100% - 30px) / 3); box-sizing: border-box;
            margin-right: 15px;
        }
        .slide:last-child { margin-right: 0; }
        .slide img {
            width: 100%; height: 352px; object-fit: cover;
            display: block; border-radius: 5px; 
        }
        .slider-btn { /* General slider button style */
            position: absolute; top: 50%; transform: translateY(-50%);
            background-color: rgba(44, 62, 80, 0.6); color: white; border: none;
            padding: 10px; cursor: pointer; font-size: 1.8em; z-index: 10;
            border-radius: 50%; width: 40px; height: 40px;
            display: flex; align-items: center; justify-content: center;
            line-height: 1; transition: background-color 0.3s ease;
        }
        .slider-btn:hover { background-color: rgba(44, 62, 80, 0.9); }
        .slider-btn:disabled {
            background-color: rgba(44, 62, 80, 0.2);
            cursor: not-allowed;
        }
        .product-gallery-section .slider-container .prev-btn { left: 10px; }
        .product-gallery-section .slider-container .next-btn { right: 10px; }
        .slider-container.single-group .slider-btn { display: none; }
        
        .usp-section-content { text-align: center; } 
        .usp-section-content.list-container {
            text-align: left; max-width: 600px; margin: 0 auto; 
        }
        .usp-section ul {
            list-style: none; padding: 0; margin-bottom: 30px;
        }
        .usp-section ul li {
            background-color: #e9ecef; padding: 10px 15px; margin-bottom: 8px;
            border-radius: 5px; border-left: 5px solid #F16334;
        }
        .usp-section .video-proof-container {
            max-width: 100%; margin: 0 auto 20px auto;
        }
        .usp-section .video-proof {
            display: flex; flex-wrap: wrap; justify-content: center;
            gap: 20px; padding: 10px 0;
        }
        .usp-section .video-item {
            flex: 1 1 400px; max-width: 480px; min-width: 300px;
            border-radius: 8px; overflow: hidden; box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }
        .usp-section .video-item iframe {
            display: block; width: 100%; height: auto;
            aspect-ratio: 16 / 9; border: none;
        }
        
        .faq-section .accordion { max-width: 700px; margin: 0 auto; } 
        .faq-section .accordion-item {
            background-color: #fff; margin-bottom: 10px;
            border: 1px solid #ddd; border-radius: 5px;
        }
        .faq-section .accordion-title {
            background-color: #f1f1f1; padding: 15px; cursor: pointer;
            font-weight: bold; display: flex; justify-content: space-between; align-items: center;
        }
        .faq-section .accordion-content {
            padding: 0 15px; max-height: 0; overflow: hidden;
            transition: max-height 0.3s ease-out, padding 0.3s ease-out;
            text-align: left;
        }
        .faq-section .accordion-content p { margin: 15px 0; }
        
        .payment-instructions-section .container { 
             padding-bottom: 40px; 
        }
        .payment-instructions { 
            background-color: #fff3cd; border: 1px solid #ffeeba; padding: 20px;
            border-radius: 5px; max-width: 700px; margin: 0 auto; text-align: left;
        }
        .payment-instructions h2 { color: #856404; font-size: 1.2em; margin-bottom: 10px; }
        
        .checkout-form-section { background-color: #e9f5ff; border-radius: 0; }
        .form-grid { display: grid; grid-template-columns: 1fr; gap: 30px; }
        @media (min-width: 768px) { .form-grid { grid-template-columns: 1fr 1fr; } }
        .form-column, .order-summary-column {
            background-color: #fff; padding: 20px; border-radius: 6px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; font-weight: bold; text-align: left; }
        .form-group input[type="text"], .form-group input[type="tel"], .form-group input[type="email"], .form-group select, .form-group textarea {
            width: calc(100% - 22px); padding: 10px; border: 1px solid #ccc;
            border-radius: 4px; font-size: 1em;
        }
        .form-group select { width: 100%; }

        .product-options .product-item { 
            display: flex;
            align-items: center;
            border: 1px solid #eee;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 4px;
        }
        .product-options .product-item img {
            width: 60px;
            height: 60px;
            object-fit: cover;
            margin-right: 15px;
            border-radius: 4px;
            flex-shrink: 0;
        }
        .product-options .product-item input[type="checkbox"] {
            margin-right: 10px;
            transform: scale(1.2);
            flex-shrink: 0;
        }
        .product-options .product-info-main {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            text-align: left;
        }
        .product-options .product-title {
            font-weight: bold;
            margin-bottom: 8px;
            font-size: 0.95em;
            cursor: pointer; 
        }
        .product-options .quantity-controls {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }
        .product-options .quantity-btn {
            background-color: #f0f0f0;
            border: 1px solid #ccc;
            color: #333;
            padding: 0;
            width: 30px;
            height: 30px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            line-height: 28px;
            text-align: center;
            border-radius: 4px;
        }
        .product-options .quantity-btn:disabled {
            background-color: #e9ecef;
            color: #adb5bd;
            cursor: not-allowed;
        }
        .product-options .quantity-input {
            width: 40px;
            text-align: center;
            padding: 5px;
            height: 18px;
            border: 1px solid #ccc;
            margin: 0 5px;
            font-size: 1em;
            border-radius: 4px;
            -moz-appearance: textfield;
        }
        .product-options .quantity-input::-webkit-outer-spin-button,
        .product-options .quantity-input::-webkit-inner-spin-button {
          -webkit-appearance: none;
          margin: 0;
        }
        .product-options .price-container {
            display: flex;
            align-items: baseline;
            margin-bottom: 5px; /* Space before details button */
        }
        .product-options .price {
            font-weight: bold;
            color: #F16334;
            font-size: 1.1em;
        }
        .product-options .original-price {
            text-decoration: line-through;
            color: #777;
            font-size: 0.9em;
            margin-right: 8px;
        }
        .details-btn {
            font-size: 0.8em;
            padding: 3px 8px;
            background-color: #5cb85c;
            color: white;
            border: none;
            border-radius: 3px;
            cursor: pointer;
            margin-top: 5px;
            display: inline-block;
            text-decoration: none;
        }
        .details-btn:hover {
            background-color: #4cae4c;
        }

        .shipping-options label, .payment-options label {
            display: block; margin-bottom: 10px; text-align: left;
        }
        .shipping-options input[type="radio"], .payment-options input[type="radio"] { margin-right: 8px; }
        
        .order-summary { overflow-x: auto; }
        .order-summary table {
            width: 100%; border-collapse: collapse; margin-bottom: 20px; min-width: 300px;
        }
        .order-summary th, .order-summary td {
            border: 1px solid #ddd; padding: 8px; text-align: left; white-space: nowrap;
        }
        .order-summary th { background-color: #f2f2f2; }
        .order-summary .total-row td { font-weight: bold; font-size: 1.1em; }
        
        .bkash-payment-details { 
            /* Initially hidden, shown by JS */
        }
        .bkash-payment-details p { text-align: left; margin-bottom: 5px;}
        .bkash-payment-details .form-group { margin-top: 15px;}
        
        .payment-policy-section .container-for-title { padding-bottom: 40px; }
        .payment-policy { 
            background-color: #fff; padding: 25px; border-radius: 5px;
            max-width: 700px; margin: 0 auto; text-align: left; border: 1px solid #e0e0e0;
        }
        
        footer {
            background-color: #2c3e50; color: #ecf0f1; text-align: center;
            padding: 20px 0; 
            position: relative; 
        }
        footer .container .social-links a { 
            color: #ecf0f1; margin: 0 10px; text-decoration: none; font-size: 1.5em;
        }

        .loader-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(255, 255, 255, 0.7); display: flex;
            justify-content: center; align-items: center; z-index: 9999;
            visibility: hidden; opacity: 0;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .loader-overlay.active { visibility: visible; opacity: 1; }
        .loader {
            border: 8px solid #f3f3f3; border-top: 8px solid #F16334;
            border-radius: 50%; width: 60px; height: 60px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* Modal Styles */
        .modal {
            display: none; 
            position: fixed; 
            z-index: 10000; 
            left: 0;
            top: 0;
            width: 100%; 
            height: 100%; 
            overflow: auto; 
            background-color: rgba(0,0,0,0.6); 
            padding-top: 30px; 
            animation: fadeInModal 0.3s ease-out;
        }
        @keyframes fadeInModal {
            from {opacity: 0;}
            to {opacity: 1;}
        }
        .modal-content {
            background-color: #fefefe;
            margin: 2% auto; 
            padding: 20px;
            border: 1px solid #888;
            width: 90%; 
            max-width: 700px;
            border-radius: 8px;
            position: relative;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            animation: slideInModal 0.3s ease-out;
        }
        @keyframes slideInModal {
            from {transform: translateY(-50px); opacity: 0;}
            to {transform: translateY(0); opacity: 1;}
        }
        .close-modal-btn {
            color: #aaa;
            position: absolute; 
            top: 10px;
            right: 15px;
            font-size: 28px;
            font-weight: bold;
            line-height: 1;
        }
        .close-modal-btn:hover,
        .close-modal-btn:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
        .modal-body {
            display: flex;
            gap: 20px;
            margin-top: 20px; 
        }
        .modal-image-gallery {
            flex: 0 0 40%; 
            max-width: 40%;
        }
        .modal-main-image {
            width: 100%;
            border-radius: 5px;
            margin-bottom: 10px;
            border: 1px solid #eee;
            aspect-ratio: 1 / 1; 
            object-fit: cover;
        }
        .modal-thumbnails {
            display: flex;
            gap: 5px;
            flex-wrap: wrap; 
        }
        .modal-thumbnails img {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border: 2px solid transparent;
            border-radius: 3px;
            cursor: pointer;
            transition: border-color 0.2s;
        }
        .modal-thumbnails img:hover, .modal-thumbnails img.active-thumbnail {
            border-color: #F16334;
        }
        .modal-product-info {
            flex: 1;
            text-align: left;
            overflow-y: auto; 
            max-height: 70vh; 
        }
        .modal-product-info h3 {
            margin-top: 0;
            color: #2c3e50;
        }

        /* Testimonial Section Styles */
        .testimonial-section {
            background-color: #f8f9fa; 
        }
        .testimonial-slider-container {
            position: relative;
            max-width: 700px; 
            margin: 30px auto;
            overflow: hidden; /* Important for translateX to work as expected */
        }
        .testimonial-wrapper {
            display: flex;
            /* transition: transform 0.5s ease-in-out; */ /* Transition will be handled by JS for smoother auto-slide */
        }
        .testimonial-item {
            min-width: 100%; 
            flex: 0 0 100%;   /* Each item takes full width of the container */
            box-sizing: border-box;
            background-color: #fff;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
            /* margin: 0 5px; */ /* Remove if only one item is visible at a time */
        }
        .testimonial-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            object-fit: cover;
            margin: 0 auto 15px auto;
            border: 3px solid #F16334;
        }
        .testimonial-text {
            font-size: 1em;
            color: #555;
            margin-bottom: 15px;
            font-style: italic;
            line-height: 1.7;
        }
        .testimonial-author {
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }
        .testimonial-rating span {
            color: #f1c40f; 
            font-size: 1.2em;
        }
        .testimonial-section .slider-btn { 
            background-color: rgba(44, 62, 80, 0.4);
        }
        .testimonial-section .slider-btn:hover {
            background-color: rgba(44, 62, 80, 0.7);
        }
        .prev-testimonial-btn {
            left: 5px; 
        }
        .next-testimonial-btn {
            right: 5px; 
        }


        /* Responsive Styles */
        @media (max-width: 1024px) {
            .usp-section .video-item { flex-basis: calc(50% - 10px); max-width: calc(50% - 10px); }
        }
        @media (max-width: 768px) {
            .hero-section .container h1 { font-size: 2em; } 
            .hero-section .container p { font-size: 1em; }
            .title-fullwidth-accent { font-size: 1.3em; padding: 12px 20px; max-width: 95%;} 
            .slide { flex: 0 0 calc((100% - 15px) / 2); margin-right: 15px; }
            .slide:last-child { margin-right: 0; } .slide img { height: 200px; }
            .slider-btn { padding: 8px; font-size: 1.5em; width: 35px; height: 35px; }
            .product-gallery-section .slider-container .prev-btn { left: 5px; }
            .product-gallery-section .slider-container .next-btn { right: 5px; }
            .usp-section .video-item { max-width: 450px; } 
            .product-options .product-title { font-size: 0.9em; }
            .product-options .price { font-size: 1em; }

            .prev-testimonial-btn { left: 0px; }
            .next-testimonial-btn { right: 0px; }
        }
        @media (max-width: 600px) {
            .modal-body {
                flex-direction: column;
            }
            .modal-image-gallery {
                max-width: 100%;
                flex: 0 0 auto; 
            }
            .modal-content {
                width: 90%;
                padding: 15px;
                margin-top: 10%;
            }
             .modal-product-info {
                max-height: 50vh; 
            }
        }
        @media (max-width: 480px) {
            .hero-section .container h1 { font-size: 1.8em; }
            .title-fullwidth-accent { font-size: 1.1em; padding: 10px 15px; max-width: 95%;} 
            h3 { font-size: 1.1em; } 
            .hero-section .container p { font-size: 0.9em; }
            .btn { padding: 8px 15px; font-size: 0.9em; }
            .checkout-form-section .btn { font-size: 1em; padding: 12px; }
            .order-summary th, .order-summary td { font-size: 0.85em; padding: 6px; white-space: normal; }
            .order-summary table { min-width: unset; }
            footer .container .social-links a { font-size: 1.3em; margin: 0 8px; }
            .form-group input[type="text"], .form-group input[type="tel"], .form-group input[type="email"], .form-group select, .form-group textarea { font-size: 0.95em; }
            .slide { flex: 0 0 100%; margin-right: 0; } .slide img { height: 230px; }
            .slider-btn { padding: 6px; font-size: 1.2em; width: 30px; height: 30px; }
            .usp-section .video-item { flex-basis: 100%; max-width: 100%; min-width: 280px; }
            .product-options .product-item { flex-wrap: wrap; }
            .product-options .product-item input[type="checkbox"] { margin-bottom: 5px; }
            .product-options .product-item img { margin-right: 10px; }
            .product-options .product-info-main { width: 100%; margin-top: 10px; }
            .product-options .quantity-controls { margin-bottom: 5px; }
        }
    </style>
</head>
<body>
    <div class="loader-overlay" id="loaderOverlay"><div class="loader"></div></div>

    <header class="hero-section">
        <div class="container"> 
            <h1>নওগাঁর সাপাহারের সেরা নিরাপদ আম, নিজ বাগান থেকে সরাসরি আপনার ঘরে</h1>
            <p>আমরা আপনাদের জন্য নিয়ে এসেছি আমাদের নিজস্ব বাগান থেকে চাষ করা ১০০% খাঁটি, সতেজ আম।</p>
            <a href="#checkout-form" class="btn">🧺 অর্ডার করতে চাই</a>
        </div>
    </header>

    <section class="product-availability">
        <h2 class="title-fullwidth-accent">কোন আম কখন পাবেন?</h2>
        <div class="container-for-title"> 
            <img src="img/0.jpg" alt="আমের প্রাপ্যতা">
        </div>
    </section>

    <section class="product-gallery-section">
        <h2 class="title-fullwidth-accent gallery-title-fullwidth">এক নজরে আমাদের আম গুলো</h2>
        <div class="container"> 
            <div class="slider-container" id="productImageSlider">
                <div class="slider-wrapper">
                    <div class="slide"><img src="img/3.jpg" alt="আমের ছবি ১"></div>
                    <div class="slide"><img src="img/4.jpg" alt="আমের ছবি ২"></div>
                    <div class="slide"><img src="img/5.jpg" alt="আমের ছবি ৩"></div>
                    <div class="slide"><img src="img/6.jpg" alt="আমের ছবি ৪"></div>
                    <div class="slide"><img src="img/7.jpg" alt="আমের ছবি ৫"></div>
                    <div class="slide"><img src="img/8.jpg" alt="আমের ছবি ৬"></div>
                    <div class="slide"><img src="img/9.jpg" alt="আমের ছবি ৭"></div>
                </div>
                <button class="slider-btn prev-btn" aria-label="Previous Slide">❮</button>
                <button class="slider-btn next-btn" aria-label="Next Slide">❯</button>
            </div>
            <br>
            <a href="#checkout-form" class="btn">🧺 অর্ডার করতে চাই</a>
        </div>
    </section>

    <section class="usp-section">
        <h2 class="title-fullwidth-accent">আমরা অন্যদের থেকে কেন আলাদা?</h2>
        <div class="container-for-title usp-section-content list-container">
            <ul>
                <li>🥭 আমরা নিজেদের চাষকৃত নিরাপদ আমটাই সরবরাহ করি। আড়ত বা অন্য কোথাও থেকে নয়।</li>
                <li>🥭 শতভাগ নিরাপদ ও PHI মেইনটেইন করে আম পাঠাই।</li>
                <li>🥭 আমরা বিগত ৫ বছর সুনামের সাথে আম সেল করি অনলাইনে কুরিয়ারে।</li>
                <li>🥭 ১৫ বছরের আম চাষের অভিজ্ঞতা ও ৩ বছরের এক্সপোর্ট এর অভিজ্ঞতা।</li>
                <li>🥭 ই-কমার্সে হাজারো সন্তুষ্ট ক্রেতার আস্থা ও ৫ বছরের সফল অভিজ্ঞতা আমাদের শক্তি।</li>
            </ul>
        </div>
        
        <!--
        <h2 class="title-fullwidth-accent">দেশ সেরা ব্র্যান্ডের আস্থা</h2>
        <div class="container-for-title usp-section-content">
            <div class="video-proof-container">
                <div class="video-proof">
                    <div class="video-item">
                        <iframe src="https://www.youtube.com/embed/YOUR_GP_VIDEO_ID_HERE" title="গ্রামীণফোনের সাথে আমাদের পার্টনারশিপ" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
                    </div>
                    <div class="video-item">
                        <iframe src="https://www.youtube.com/embed/YOUR_DIPTO_TV_VIDEO_ID_HERE" title="দীপ্ত টিভিতে আমাদের আম" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
                    </div>
                </div>
            </div>
            

            <a href="#checkout-form" class="btn">🧺 অর্ডার করতে চাই</a>
        </div>
    </section>
            -->
    <section class="faq-section">
        <h2 class="title-fullwidth-accent">সম্মানিত গ্রাহকের কিছু প্রশ্ন ও উত্তর</h2>
        <div class="container-for-title">
            <div class="accordion">
                <div class="accordion-item">
                    <div class="accordion-title">আম রুপালী'র এর উপর কেন আস্থা রাখবেন ? <span>▼</span></div>
                    <div class="accordion-content"><p>আমাদের নওগাঁ জেলার সাপাহার উপজেলায় নিজস্ব পৈত্রিক জমিতে ৩০ বিঘা+ আমের বাগান থেকে আম সংগ্রহ করা হয় বলে আপনাদেরকে ১০০% নিরাপদ ও ক্যামিকেল ফ্রি আমের নিশ্চয়তা দিতে পারি। আমাদের এই পথচলায় আমরা পাশে পেয়েছি দেশের সবচেয়ে বড় মোবাইল অপারেটর গ্রামীণফোন ও কৃষি বিষয়ক টিভি চ্যানেল দিপ্ত টিভি।</p></div>
                </div>
                <div class="accordion-item">
                    <div class="accordion-title">ডেলিভারি কতদিনে পাবো? <span>▼</span></div>
                    <div class="accordion-content"><p>ঢাকার মধ্যে ২৪-৪৮ ঘণ্টা এবং ঢাকার বাইরে ৪৮-৭২ ঘণ্টার মধ্যে ডেলিভারি পাবেন।</p></div>
                </div>
                <div class="accordion-item">
                    <div class="accordion-title">রিটার্ন পলিসি আছে কি? <span>▼</span></div>
                    <div class="accordion-content"><p>হ্যাঁ, আমাদের সহজ ২৫-১০০% পর্যন্ত রিটার্ন পলিসি রয়েছে। তবে সেক্ষেত্রে আম রিসিভ করার পর আনবক্সিং এর ভিডিও করে রাখতে হবে। কুরিয়ার এর কারণে বা প্রাকৃতিক কারণে আম নষ্ট হলেও আমরা শতভাগ রিফান্ড করি গ্রাহককে বা আবার আম পাঠাই।</p></div>
                </div>
                 <div class="accordion-item">
                    <div class="accordion-title">পেমেন্ট করার নিয়ম কি? <span>▼</span></div>
                    <div class="accordion-content"><p>আম কাচামাল হওয়ায় আমরা অবশ্যই প্রি পেইড অথবা পার্সিয়াল পেমেন্ট ৫০০ টাকা দিয়ে বাকিটা আম কুরিয়ার অফিসে ক্যাশ অন ডেলিভারিতে আম সংগ্রহ করতে পারবেন। অনলাইন পেমেন্ট (বিকাশ, রকেট, নগদ) গ্রহণ করি। 01791835232- পারসোনাল নাম্বার। আমরা প্রতিদিনের অর্ডার এর আম পরের দিন বাগান থেকে পেড়ে পাঠাই। তাই আগের দিন রাতেই অর্ডার কনফার্ম করে নেই। এছাড়াও ক্যাশ অন ডেলিভারি সুবিধাও রয়েছে।</p></div>
                </div>
                <div class="accordion-item">
                    <div class="accordion-title">পাইকারী, রিসেল এবং কর্পোরেট অর্ডারের সিস্টেম কি? <span>▼</span></div>
                    <div class="accordion-content"><p>জী, অবশ্যই আমাদের কাছে পাইকারী ভাবে আম নেয়ার সুযোগ আছে, রিসেলার হওয়ার ও সুযোগ আছে এবং আপনার কোম্পানির জন্য গিফট বক্সে ব্রান্ডিং করে আম নেয়ারও অপশন রয়েছে। আমরা প্রতিদিনের অর্ডার এর আম পরের দিন বাগান থেকে পেড়ে পাঠাই। তাই আগের দিন রাতেই অর্ডার কনফার্ম করে নেই।</p></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Testimonial Section -->
    <section class="testimonial-section padded-section">
        <h2 class="title-fullwidth-accent">আমাদের সম্মানিত গ্রাহকদের মতামত</h2>
        <div class="container">
            <div class="testimonial-slider-container">
                <div class="testimonial-wrapper">
                    <!-- Testimonial Item 1 -->
                    <div class="testimonial-item">
                        <img src="img/R3.jpg" alt="গ্রাহকের ছবি" class="testimonial-avatar">
                        <p class="testimonial-text">" আম কিনে আমি খুবই সন্তুষ্ট। আমগুলো ছিল সতেজ এবং খুবই মিষ্টি। ডেলিভারিও সঠিক সময়ে পেয়েছি।"</p>
                        <p class="testimonial-author">- মোঃ করিম উল্লাহ, ঢাকা</p>
                        <div class="testimonial-rating">
                            <span>⭐</span><span>⭐</span><span>⭐</span><span>⭐</span><span>⭐</span>
                        </div>
                    </div>
                    <!-- Testimonial Item 2 -->
                    <div class="testimonial-item">
                        <img src="img/R1.jpg" alt="গ্রাহকের ছবি" class="testimonial-avatar">
                        <p class="testimonial-text">"বাগান থেকে সরাসরি এমন কেমিক্যালমুক্ত আম পাওয়ার সুযোগ করে দেওয়ার জন্য ধন্যবাদ। আমের মান ছিল অসাধারণ।"</p>
                        <p class="testimonial-author">- মিসেস. সেলিনা বেগম, চট্টগ্রাম</p>
                        <div class="testimonial-rating">
                            <span>⭐</span><span>⭐</span><span>⭐</span><span>⭐</span><span>☆</span>
                        </div>
                    </div>
                    <!-- Testimonial Item 3 -->
                    <div class="testimonial-item">
                        <img src="img/R4.jpg" alt="গ্রাহকের ছবি" class="testimonial-avatar">
                        <p class="testimonial-text">"প্যাকেজিং খুব ভালো ছিল এবং একটি আমও নষ্ট হয়নি। আমি আবার অর্ডার করবো।"</p>
                        <p class="testimonial-author">- জনাব আরিফ হোসেন, খুলনা</p>
                        <div class="testimonial-rating">
                            <span>⭐</span><span>⭐</span><span>⭐</span><span>⭐</span><span>⭐</span>
                        </div>
                    </div>
                     <!-- Testimonial Item 4 -->
                    <div class="testimonial-item">
                        <img src="img/R2.jpg" alt="গ্রাহকের ছবি" class="testimonial-avatar">
                        <p class="testimonial-text">"এই বছর সেরা আম খেলাম আপনাদের এখান থেকে"</p>
                        <p class="testimonial-author">- সুমাইয়া রহমান, রাজশাহী</p>
                        <div class="testimonial-rating">
                            <span>⭐</span><span>⭐</span><span>⭐</span><span>⭐</span><span>⭐</span>
                        </div>
                    </div>
                </div>
                <button class="slider-btn prev-testimonial-btn" aria-label="Previous Testimonial">❮</button>
                <button class="slider-btn next-testimonial-btn" aria-label="Next Testimonial">❯</button>
            </div>
        </div>
    </section>

    <section class="payment-instructions-section padded-section">
        <div class="container"> 
            <div class="payment-instructions">
                <h2>বিকাশ পেমেন্টের জন্য নির্দেশাবলী</h2>
                <p><strong>বিকাশ পারসোনাল নাম্বার: 01791835232</strong> নাম্বার ব্যবহার করে অগ্রিম টাকা সেন্ড মানি (send money) করে নিচের Bkash এর ফাঁকা ঘরে যে নাম্বার থেকে টাকা পাঠিয়েছেন সেই নাম্বার এবং ট্রানজেকশন আইডি বসিয়ে অর্ডারটি সম্পূর্ণ করবেন।</p>
                 <p>ক্যাশ অন ডেলিভারির ক্ষেত্রে ডেলিভারি ম্যানের কাছে সরাসরি মূল্য পরিশোধ করতে পারবেন। বিভিন্ন ওজনে ভিন্ন ডেলিভারি ফি প্রযোজ্য, যেমন ১১ কেজি আমের জন্য ১২০ টাকা, ২২ কেজি আমের জন্য ২৪০ টাকা।</p>
            </div>
        </div>
    </section>

    <section id="checkout-form" class="checkout-form-section">
        <h2 class="title-fullwidth-accent">নিচের ফর্মে আপনার নাম, মোবাইল নম্বর ও সম্পূর্ণ ঠিকানা লিখে <br>কনফার্ম অর্ডারে ক্লিক করুন</h2>
        <div class="container-for-title"> 
            <form id="orderForm">
                <div class="form-grid">
                    <div class="form-column">
                        <h3>আপনার পছন্দের পণ্যটি সিলেক্ট করুন:</h3>
                        <div class="product-options" id="productOptionsContainer">
                            <!-- পণ্যগুলো এখানে জাভাস্ক্রিপ্ট দ্বারা লোড হবে -->
                        </div>
                        <h3>বিলিং বিবরণ:</h3>
                        <div class="form-group">
                            <label for="billing_name">আপনার নাম <span style="color:red;">*</span></label>
                            <input type="text" id="billing_name" name="নাম" placeholder="আপনার নাম লিখুন" required>
                        </div>
                        <div class="form-group">
                            <label for="billing_address">আপনার ঠিকানা <span style="color:red;">*</span></label>
                            <input type="text" id="billing_address" name="ঠিকানা" placeholder="আপনার সম্পূর্ণ ঠিকানা লিখুন" required>
                        </div>
                        <div class="form-group">
                            <label for="billing_phone">মোবাইল নম্বর <span style="color:red;">*</span></label>
                            <input type="tel" id="billing_phone" name="মোবাইল নম্বর" placeholder="আপনার মোবাইল নম্বর লিখুন" required>
                        </div>
                        <div class="form-group">
                            <label for="billing_courier">কোন কুরিয়ারে নিতে চাচ্ছেন? <span style="color:red;">*</span></label>
                            <select id="billing_courier" name="কুরিয়ার" required>
                                <option value="">-- নির্বাচন করুন --</option>
                                <option value="সওদাগর এক্সপ্রেস">সওদাগর এক্সপ্রেস</option>
                                <option value="স্টেডফাস্ট">স্টেডফাস্ট</option>
                                <option value="করতোয়া কুরিয়ার">করতোয়া কুরিয়ার</option>
                                <option value="এ জে আর কুরিয়ার">এ জে আর কুরিয়ার</option>
                                <option value="সুন্দরবন কুরিয়ার সার্ভিস">সুন্দরবন কুরিয়ার সার্ভিস</option>
                            </select>
                        </div>
                    </div>
                    <div class="order-summary-column">
                        <h3>শিপিং পদ্ধতি:</h3>
                        <div class="shipping-options">
                            <label><input type="radio" name="শিপিং পদ্ধতি" value="হোম ডেলিভারি" checked> হোম ডেলিভারি!</label>
                            <label><input type="radio" name="শিপিং পদ্ধতি" value="কুরিয়ার অফিস ডেলিভারي" data-cost="0"> কুরিয়ার অফিস ডেলিভারি ফ্রি!</label>
                        </div>
                        <h3>আপনার অর্ডার:</h3>
                        <div class="order-summary">
                            <table>
                                <thead><tr><th>পণ্য</th><th>সাবটোটাল</th></tr></thead>
                                <tbody id="cartItems"></tbody>
                                <tfoot>
                                    <tr><td>সাবটোটাল</td><td id="subtotalAmount">৳০</td></tr>
                                    <tr><td>শিপিং</td><td id="shippingAmount">৳০</td></tr>
                                    <tr class="total-row"><td>মোট</td><td id="totalAmount">৳০</td></tr>
                                </tfoot>
                            </table>
                        </div>
                        <h3>পেমেন্ট পদ্ধতি:</h3>
                        <div class="payment-options">
                            <label>
                                <input type="radio" name="পেমেন্ট পদ্ধতি" value="বিকাশ" checked> বিকাশ
                              <!-- <img src="https://logowik.com/content/uploads/images/bkash-payment-gateway5027.jpg" alt="bKash" style="height:20px; vertical-align:middle; margin-left:5px;"> -->
                            </label>
                             <label>
                                <input type="radio" name="পেমেন্ট পদ্ধতি" value="ক্যাশ অন ডেলিভারি"> ক্যাশ অন ডেলিভারি
                            </label>
                            <div class="bkash-payment-details" id="bkashPaymentDetails"> 
                                <p>আপনাকে বিকাশে পাঠাতে হবে: <strong id="bkashTotalAmount">৳০</strong></p>
                                <p>অ্যাকাউন্ট টাইপ: <strong>পারসোনাল</strong></p>
                                <p>অ্যাকাউন্ট নম্বর: <strong>01791835232</strong></p>
                                <div class="form-group">
                                    <label for="bkash_number">আপনার বিকাশ অ্যাকাউন্ট নম্বর:</label>
                                    <input type="text" id="bkash_number" name="গ্রাহকের বিকাশ নম্বর" placeholder="01XXXXXXXXX">
                                </div>
                                <div class="form-group">
                                    <label for="bkash_trx_id">আপনার বিকাশ ট্রানজেকশন আইডি:</label>
                                    <input type="text" id="bkash_trx_id" name="বিকাশ ট্রানজেকশন আইডি" placeholder="2M7A5">
                                </div>
                            </div>
                        </div>
                        <button type="submit" class="btn" id="submitOrderBtn" style="width: 100%; padding: 15px; font-size: 1.2em; margin-top: 20px;">কনফার্ম অর্ডার</button>
                    </div>
                </div>
            </form>
        </div>
    </section>

    <section class="payment-policy-section">
        <h2 class="title-fullwidth-accent">💳 পেমেন্ট পলিসি</h2>
        <div class="container-for-title">
            <div class="payment-policy">
                <p>আম একটি পচনশীল ফল। আমরা সরবরাহ করি শতভাগ কেমিক্যালমুক্ত, হাতে বাছাই করা আম—যা কোনো স্টকে রাখা নয়, অর্ডার নিশ্চিত হওয়ার পরই বাগান থেকে সংগ্রহ করা হয়।</p>
                <p>তাই টাটকা ও মানসম্পন্ন পণ্য পৌঁছে দিতে অর্ডার নিশ্চিত হওয়ার সঙ্গে সঙ্গেই সংগ্রহ, প্যাকেজিং ও দ্রুত ডেলিভারি প্রক্রিয়া শুরু হয়। ক্যাশ অন ডেলিভারি এবং বিকাশ পেমেন্ট উভয় সুবিধাই রয়েছে।</p>
                <p>আপনি নির্ভয়ে ও নিশ্চিন্তে অর্ডার করতে পারেন।</p>
                <p>👉 একবার অর্ডার করেই দেখুন—বিশ্বাসটা মিষ্টি ফলের মতোই অনুভব করবেন!</p>
            </div>
        </div>
    </section>

    <footer>
        <div class="container"> 
            <p id="CcopyrightText">Copyright © 2024</p>
            <!--
            <div class="social-links">
                <a href="https://facebook.com/yourpage" target="_blank" title="Facebook">FB</a>
                <a href="https://wa.me/01791835232" target="_blank" title="WhatsApp">WA</a>
            </div>-->
            
        </div>
    </footer>

    <!-- Product Details Modal -->
    <div id="productDetailsModal" class="modal">
        <div class="modal-content">
            <span class="close-modal-btn">×</span>
            <div class="modal-body">
                <div class="modal-image-gallery">
                    <img id="modalMainImage" src="" alt="পণ্যের ছবি" class="modal-main-image">
                    <div id="modalThumbnails" class="modal-thumbnails">
                        <!-- থাবনেইল ছবিগুলো এখানে জাভাস্ক্রিপ্ট দিয়ে আসবে -->
                    </div>
                </div>
                <div class="modal-product-info">
                    <h3 id="modalProductName">পণ্যের নাম</h3>
                    <p id="modalProductDescription">পণ্যের বিস্তারিত বিবরণ এখানে আসবে।</p>
                    <p><strong>মূল্য:</strong> <span id="modalProductPrice">৳0</span></p>
                    <p><strong>ওজন (প্রতি ইউনিট):</strong> <span id="modalProductWeight">0 কেজি</span></p>
                </div>
            </div>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', function() {
            let allProductsData = []; 

            async function loadProducts() {
                try {
                    const response = await fetch('products.json'); 
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}, ${await response.text()}`);
                    }
                    allProductsData = await response.json(); 
                    renderProducts(allProductsData);
                    initializeProductEventListeners(); 
                    initializeModalEventListeners(); 
                    initializeTestimonialSlider(); // Initialize testimonial slider here
                    handlePaymentMethodChange(); 
                    updateOrderSummary(); 
                } catch (error) {
                    console.error("Could not load products:", error);
                    const container = document.getElementById('productOptionsContainer');
                    if (container) {
                        container.innerHTML = '<p style="color:red; text-align:left;">দুঃখিত, পণ্য তালিকা লোড করা যায়নি। ('+ error.message +') <br>অনুগ্রহ করে নিশ্চিত করুন `products.json` ফাইলে প্রতিটি পণ্যের জন্য `weight_kg`, `description` এবং `gallery_images` (ঐচ্ছিক) উল্লেখ করা আছে এবং ফাইলটি সঠিক স্থানে আছে। <br> কিছুক্ষণ পর আবার চেষ্টা করুন অথবা অ্যাডমিনের সাথে যোগাযোগ করুন।</p>';
                    }
                }
            }

            function renderProducts(products) {
                const container = document.getElementById('productOptionsContainer');
                if (!container) return;
                container.innerHTML = ''; 

                products.forEach(product => {
                    const productItemDiv = document.createElement('div');
                    productItemDiv.classList.add('product-item');
                    productItemDiv.dataset.id = product.id; 
                    productItemDiv.dataset.price = product.price;
                    productItemDiv.dataset.weightKg = product.weight_kg || 1; 

                    if (product.original_price && product.original_price > 0) {
                        productItemDiv.dataset.originalPrice = product.original_price;
                    }

                    let originalPriceHTML = product.original_price && product.original_price > 0 ? `<span class="original-price">৳${product.original_price}</span>` : '';
                    const detailsButtonHTML = `<button type="button" class="details-btn" data-product-id="${product.id}">বিস্তারিত</button>`;

                    productItemDiv.innerHTML = `
                        <input type="checkbox" id="checkbox_${product.id}" name="product_selection" data-product-name="${product.data_product_name || product.name}">
                        <img src="${product.image_url}" alt="${product.alt_text || product.name}">
                        <div class="product-info-main">
                            <label for="checkbox_${product.id}" class="product-title">${product.name}</label>
                            <div class="quantity-controls">
                                <button type="button" class="quantity-btn minus-btn" aria-label="Decrease quantity" disabled>-</button>
                                <input type="number" class="quantity-input" name="quantity_${product.id}" value="1" min="1" readonly>
                                <button type="button" class="quantity-btn plus-btn" aria-label="Increase quantity" disabled>+</button>
                            </div>
                            <div class="price-container">
                                ${originalPriceHTML}
                                <span class="price">৳${product.price}</span>
                            </div>
                            ${detailsButtonHTML} 
                        </div>
                    `;
                    container.appendChild(productItemDiv);
                });
            }
            
            function initializeProductEventListeners() {
                const currentProductItems = document.querySelectorAll('.product-options .product-item');
                currentProductItems.forEach(item => {
                    const checkbox = item.querySelector('input[type="checkbox"]');
                    const quantityInput = item.querySelector('.quantity-input');
                    const minusBtn = item.querySelector('.minus-btn');
                    const plusBtn = item.querySelector('.plus-btn');
                    const titleLabel = item.querySelector('.product-title');

                    checkbox.addEventListener('change', updateOrderSummary);
                    if(titleLabel) {
                        titleLabel.addEventListener('click', () => {
                            checkbox.checked = !checkbox.checked;
                            checkbox.dispatchEvent(new Event('change'));
                        });
                    }
                    minusBtn.addEventListener('click', () => {
                        let val = parseInt(quantityInput.value);
                        if (val > 1) { quantityInput.value = val - 1; updateOrderSummary(); }
                    });
                    plusBtn.addEventListener('click', () => {
                        quantityInput.value = parseInt(quantityInput.value) + 1; updateOrderSummary();
                    });
                    quantityInput.addEventListener('change', () => { 
                         if (isNaN(parseInt(quantityInput.value)) || parseInt(quantityInput.value) < 1) quantityInput.value = 1;
                         updateOrderSummary();
                    });
                    quantityInput.addEventListener('input', updateOrderSummary);
                });
            }

            function initializeModalEventListeners() {
                const modal = document.getElementById('productDetailsModal');
                if (!modal) return;
                const closeModalBtn = modal.querySelector('.close-modal-btn');
                
                document.querySelectorAll('.details-btn').forEach(button => {
                    button.addEventListener('click', function() {
                        const productId = this.dataset.productId;
                        const product = allProductsData.find(p => p.id === productId);
                        if (product) openProductModal(product);
                    });
                });

                closeModalBtn.addEventListener('click', () => modal.style.display = "none");
                window.addEventListener('click', event => { if (event.target == modal) modal.style.display = "none"; });
            }

            function openProductModal(product) {
                const modal = document.getElementById('productDetailsModal');
                document.getElementById('modalMainImage').src = product.image_url;
                document.getElementById('modalProductName').textContent = product.name;
                document.getElementById('modalProductDescription').innerHTML = product.description ? product.description.replace(/\n/g, '<br>') : "বিস্তারিত বিবরণ উপলব্ধ নেই।";
                document.getElementById('modalProductPrice').textContent = `৳${product.price}`;
                document.getElementById('modalProductWeight').textContent = `${product.weight_kg || 1} কেজি`;

                const thumbnailsContainer = document.getElementById('modalThumbnails');
                thumbnailsContainer.innerHTML = ''; 

                const allImages = [product.image_url, ...(product.gallery_images || [])];
                const uniqueImages = [...new Set(allImages)]; 

                uniqueImages.forEach((imgUrl, index) => {
                    const thumbImg = document.createElement('img');
                    thumbImg.src = imgUrl;
                    thumbImg.alt = `${product.name} thumbnail ${index + 1}`;
                    if (index === 0) thumbImg.classList.add('active-thumbnail');
                    
                    thumbImg.addEventListener('click', () => {
                        document.getElementById('modalMainImage').src = imgUrl;
                        document.querySelectorAll('#modalThumbnails img').forEach(img => img.classList.remove('active-thumbnail'));
                        thumbImg.classList.add('active-thumbnail');
                    });
                    thumbnailsContainer.appendChild(thumbImg);
                });
                
                modal.style.display = "block";
            }
            
            loadProducts(); 

            // Smooth scroll
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const targetElement = document.querySelector(this.getAttribute('href'));
                    if (targetElement) {
                        window.scrollTo({ top: targetElement.offsetTop - 20, behavior: "smooth" });
                    }
                });
            });

            // FAQ Accordion
            document.querySelectorAll('.accordion-item .accordion-title').forEach(title => {
                title.addEventListener('click', () => {
                    const item = title.parentElement;
                    const content = item.querySelector('.accordion-content');
                    const icon = title.querySelector('span');
                    const isCurrentlyOpen = content.style.maxHeight && content.style.maxHeight !== "0px";

                    document.querySelectorAll('.accordion-item .accordion-content').forEach(otherContent => {
                        if (otherContent !== content) {
                           otherContent.style.maxHeight = null;
                           otherContent.style.paddingTop = '0';
                           otherContent.style.paddingBottom = '0';
                           const otherIcon = otherContent.previousElementSibling.querySelector('span');
                           if (otherIcon) otherIcon.textContent = '▼';
                        }
                    });

                    if (isCurrentlyOpen) {
                        content.style.maxHeight = null;
                        content.style.paddingTop = '0';
                        content.style.paddingBottom = '0';
                        if (icon) icon.textContent = '▼';
                    } else {
                        content.style.maxHeight = content.scrollHeight + 30 + "px"; 
                        content.style.paddingTop = '15px';
                        content.style.paddingBottom = '15px';
                        if (icon) icon.textContent = '▲';
                    }
                });
            });

            // Product Image Slider
            const productImageSlider = document.getElementById('productImageSlider');
            if (productImageSlider) {
                const sliderWrapper = productImageSlider.querySelector('.slider-wrapper');
                const slides = Array.from(productImageSlider.querySelectorAll('.slide'));
                const prevButton = productImageSlider.querySelector('.prev-btn');
                const nextButton = productImageSlider.querySelector('.next-btn');
                let currentIndex = 0;
                let visibleSlides = 3;
                const totalSlides = slides.length;
                let autoSlideIntervalProduct;
                const autoSlideDelayProduct = 4000;

                function getVisibleSlidesCountProduct() { // Renamed to avoid conflict
                    if (window.innerWidth <= 480) return 1;
                    if (window.innerWidth <= 768) return 2;
                    return 3;
                }
                function updateSliderStylesAndVisibilityProduct() { // Renamed
                    visibleSlides = getVisibleSlidesCountProduct();
                    if (!slides.length) return;
                    const gap = (visibleSlides > 1) ? 15 : 0;
                    slides.forEach(slideEl => {
                        let flexBasis = `calc((100% - ${(visibleSlides - 1) * gap}px) / ${visibleSlides})`;
                        if (visibleSlides === 1) {
                            flexBasis = '100%';
                            slideEl.style.marginRight = '0';
                        } else {
                            slideEl.style.marginRight = `${gap}px`;
                        }
                        slideEl.style.flex = `0 0 ${flexBasis}`;
                    });
                    const showButtons = totalSlides > visibleSlides;
                    productImageSlider.classList.toggle('single-group', !showButtons);
                    if(prevButton) prevButton.style.display = showButtons ? 'flex' : 'none';
                    if(nextButton) nextButton.style.display = showButtons ? 'flex' : 'none';
                }
                function showProductSlide(index, animate = true) { // Renamed
                    if (!slides.length || !slides[0] || !slides[0].offsetParent) return;
                    const firstSlide = slides[0];
                    const slideWidth = firstSlide.offsetWidth;
                    const gap = (visibleSlides > 1 && getComputedStyle(firstSlide).marginRight) ? parseFloat(getComputedStyle(firstSlide).marginRight) : 0;
                    const totalSlideWidth = slideWidth + gap;
                    let offset = - (index * totalSlideWidth);
                    sliderWrapper.style.transition = animate ? 'transform 0.7s cubic-bezier(0.65, 0, 0.35, 1)' : 'none';
                    sliderWrapper.style.transform = `translateX(${offset}px)`;
                }
                function nextProductSlide() { // Renamed
                    const maxIndex = Math.max(0, totalSlides - visibleSlides);
                    currentIndex = (currentIndex + 1) > maxIndex ? 0 : currentIndex + 1;
                    showProductSlide(currentIndex);
                }
                function prevProductSlide() { // Renamed
                    const maxIndex = Math.max(0, totalSlides - visibleSlides);
                    currentIndex = (currentIndex - 1) < 0 ? maxIndex : currentIndex - 1;
                    showProductSlide(currentIndex);
                }
                function startAutoProductSlide() { // Renamed
                    stopAutoProductSlide();
                    if (totalSlides > visibleSlides) autoSlideIntervalProduct = setInterval(nextProductSlide, autoSlideDelayProduct);
                }
                function stopAutoProductSlide() { clearInterval(autoSlideIntervalProduct); } // Renamed
                function setupProductSlider() { // Renamed
                    if (totalSlides === 0) {
                       if(prevButton) prevButton.style.display = 'none';
                       if(nextButton) nextButton.style.display = 'none';
                       return;
                    }
                    updateSliderStylesAndVisibilityProduct();
                    showProductSlide(currentIndex, false);
                    if (totalSlides > visibleSlides) {
                        if (prevButton) prevButton.addEventListener('click', () => { prevProductSlide(); stopAutoProductSlide(); startAutoProductSlide(); });
                        if (nextButton) nextButton.addEventListener('click', () => { nextProductSlide(); stopAutoProductSlide(); startAutoProductSlide(); });
                        productImageSlider.addEventListener('mouseenter', stopAutoProductSlide);
                        productImageSlider.addEventListener('mouseleave', startAutoProductSlide);
                        startAutoProductSlide();
                    }
                }
                setTimeout(setupProductSlider, 100); 
                window.addEventListener('resize', () => {
                    stopAutoProductSlide();
                    setTimeout(() => {
                        updateSliderStylesAndVisibilityProduct();
                        currentIndex = Math.min(currentIndex, Math.max(0, totalSlides - visibleSlides));
                        showProductSlide(currentIndex, false);
                        startAutoProductSlide();
                    }, 200);
                });
            }

            // Testimonial Slider (Auto + Loop)
            function initializeTestimonialSlider() {
                const testimonialSliderContainer = document.querySelector('.testimonial-slider-container');
                if (!testimonialSliderContainer) {
                    console.warn("Testimonial slider container not found.");
                    return;
                }

                const testimonialWrapper = testimonialSliderContainer.querySelector('.testimonial-wrapper');
                const testimonialItems = testimonialWrapper ? Array.from(testimonialWrapper.querySelectorAll('.testimonial-item')) : [];
                const prevTestimonialBtn = testimonialSliderContainer.querySelector('.prev-testimonial-btn');
                const nextTestimonialBtn = testimonialSliderContainer.querySelector('.next-testimonial-btn');
                
                let currentTestimonialIndex = 0;
                const totalTestimonials = testimonialItems.length;
                let testimonialInterval;
                const testimonialSlideDelay = 5000; // 5 seconds

                function updateTestimonialButtonStates() {
                    if (!prevTestimonialBtn || !nextTestimonialBtn || totalTestimonials <= 1) {
                        if(prevTestimonialBtn) prevTestimonialBtn.style.display = 'none';
                        if(nextTestimonialBtn) nextTestimonialBtn.style.display = 'none';
                        return;
                    }
                    prevTestimonialBtn.style.display = 'flex';
                    nextTestimonialBtn.style.display = 'flex';
                    // For looping slider, buttons are always enabled if totalTestimonials > 1
                    // prevTestimonialBtn.disabled = false; 
                    // nextTestimonialBtn.disabled = false;
                }

                function showTestimonial(index, useTransition = true) {
                    if (!testimonialWrapper || totalTestimonials === 0) return;
                    
                    testimonialWrapper.style.transition = useTransition ? 'transform 0.5s ease-in-out' : 'none';
                    const offset = -index * 100;
                    testimonialWrapper.style.transform = `translateX(${offset}%)`;
                    currentTestimonialIndex = index; // Update global index
                    // updateTestimonialButtonStates(); // Buttons are always active in loop
                }

                function nextTestimonial() {
                    let nextIndex = (currentTestimonialIndex + 1) % totalTestimonials;
                    showTestimonial(nextIndex);
                }

                function prevTestimonial() {
                    let prevIndex = (currentTestimonialIndex - 1 + totalTestimonials) % totalTestimonials;
                    showTestimonial(prevIndex);
                }

                function startAutoTestimonialSlide() {
                    stopAutoTestimonialSlide(); // Clear existing interval
                    if (totalTestimonials > 1) { // Only start if more than one item
                        testimonialInterval = setInterval(nextTestimonial, testimonialSlideDelay);
                    }
                }

                function stopAutoTestimonialSlide() {
                    clearInterval(testimonialInterval);
                }

                if (totalTestimonials > 0) {
                    updateTestimonialButtonStates(); // Set initial button visibility
                    showTestimonial(0, false); // Show first without transition initially
                    
                    if (nextTestimonialBtn) {
                        nextTestimonialBtn.addEventListener('click', () => {
                            nextTestimonial();
                            stopAutoTestimonialSlide(); // Optional: stop auto on manual nav
                            startAutoTestimonialSlide(); // Optional: restart auto on manual nav
                        });
                    }
                    if (prevTestimonialBtn) {
                        prevTestimonialBtn.addEventListener('click', () => {
                            prevTestimonial();
                            stopAutoTestimonialSlide(); // Optional
                            startAutoTestimonialSlide(); // Optional
                        });
                    }

                    testimonialSliderContainer.addEventListener('mouseenter', stopAutoTestimonialSlide);
                    testimonialSliderContainer.addEventListener('mouseleave', startAutoTestimonialSlide);
                    
                    startAutoTestimonialSlide(); // Start autoslide
                } else {
                    if(prevTestimonialBtn) prevTestimonialBtn.style.display = 'none';
                    if(nextTestimonialBtn) nextTestimonialBtn.style.display = 'none';
                    console.warn("No testimonial items found to display.");
                }
            }


            const shippingRadios = document.querySelectorAll('input[name="শিপিং পদ্ধতি"]');
            const paymentMethodRadios = document.querySelectorAll('input[name="পেমেন্ট পদ্ধতি"]');
            const bkashPaymentDetailsDiv = document.getElementById('bkashPaymentDetails');
            const bkashNumberInput = document.getElementById('bkash_number');
            const bkashTrxIdInput = document.getElementById('bkash_trx_id');
            const orderForm = document.getElementById('orderForm');
            const submitOrderBtn = document.getElementById('submitOrderBtn');
            const loaderOverlay = document.getElementById('loaderOverlay');
            const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzI8f7MQKr9hPzTclAMY0htcI4Qe39jb5K10YxJCeM-R7lFg75dipNxpc0Bmw6DKFe9/exec"; 
           
            shippingRadios.forEach(radio => radio.addEventListener('change', updateOrderSummary));
            paymentMethodRadios.forEach(radio => radio.addEventListener('change', handlePaymentMethodChange));

            function handlePaymentMethodChange() {
                const selectedPaymentMethod = document.querySelector('input[name="পেমেন্ট পদ্ধতি"]:checked').value;
                bkashPaymentDetailsDiv.style.display = selectedPaymentMethod === 'বিকাশ' ? 'block' : 'none';
                updateOrderSummary(); 
            }
            
            handlePaymentMethodChange(); 

            orderForm.addEventListener('submit', function(e) { 
                e.preventDefault(); 
                submitOrderBtn.disabled = true;
                loaderOverlay.classList.add('active');

                const name = document.getElementById('billing_name').value.trim();
                const address = document.getElementById('billing_address').value.trim();
                const phone = document.getElementById('billing_phone').value.trim();
                const courier = document.getElementById('billing_courier').value;
                const paymentMethodRadio = document.querySelector('input[name="পেমেন্ট পদ্ধতি"]:checked');
                const selectedPaymentMethodValue = paymentMethodRadio ? paymentMethodRadio.value : '';
                
                let productsSelectedCount = 0;
                document.querySelectorAll('.product-options .product-item input[type="checkbox"]:checked').forEach(() => productsSelectedCount++);

                if (productsSelectedCount === 0) {
                    alert('অনুগ্রহ করে অন্তত একটি পণ্য নির্বাচন করুন।');
                    submitOrderBtn.disabled = false; loaderOverlay.classList.remove('active'); return;
                }
                if (!name || !address || !phone || !courier) {
                    alert('অনুগ্রহ করে সকল আবশ্যক (*) ফিল্ড পূরণ করুন।');
                    submitOrderBtn.disabled = false; loaderOverlay.classList.remove('active'); return;
                }
                
                if (selectedPaymentMethodValue === 'বিকাশ' && (!bkashNumberInput.value.trim() || !bkashTrxIdInput.value.trim())) {
                    alert('বিকাশ পেমেন্টের জন্য অনুগ্রহ করে আপনার বিকাশ নম্বর এবং ট্রানজেকশন আইডি প্রদান করুন।');
                    submitOrderBtn.disabled = false; loaderOverlay.classList.remove('active'); return;
                }

                let selectedProductsDetails = "";
                document.querySelectorAll('.product-options .product-item').forEach(item => {
                    const checkbox = item.querySelector('input[type="checkbox"]');
                    if (checkbox.checked) {
                        const productName = checkbox.dataset.productName || item.querySelector('.product-title').textContent;
                        const quantity = item.querySelector('.quantity-input').value; 
                        const price = item.dataset.price;
                        const weightPerUnit = parseFloat(item.dataset.weightKg) || 1;
                        const totalItemWeight = quantity * weightPerUnit;
                        selectedProductsDetails += `${productName} (পরিমাণ: ${quantity} ইউনিট, মোট ওজন: ${totalItemWeight.toFixed(1)} কেজি, একক মূল্য: ৳${price}); `;
                    }
                });

                const formDataToSheet = new FormData(); 
                formDataToSheet.append('নাম', name);
                formDataToSheet.append('ঠিকানা', address);
                formDataToSheet.append('মোবাইল নম্বর', phone);
                formDataToSheet.append('কুরিয়ার', courier);
                formDataToSheet.append('নির্বাচিত পণ্য ও পরিমাণ', selectedProductsDetails.trim() || 'N/A');
                formDataToSheet.append('শিপিং পদ্ধতি', document.querySelector('input[name="শিপিং পদ্ধতি"]:checked').value);
                formDataToSheet.append('সাবটোটাল', document.getElementById('subtotalAmount').textContent);
                formDataToSheet.append('শিপিং চার্জ', document.getElementById('shippingAmount').textContent);
                formDataToSheet.append('মোট টাকা', document.getElementById('totalAmount').textContent);
                formDataToSheet.append('পেমেন্ট পদ্ধতি', selectedPaymentMethodValue || 'N/A');
                formDataToSheet.append('গ্রাহকের বিকাশ নম্বর', selectedPaymentMethodValue === 'বিকাশ' ? bkashNumberInput.value.trim() : 'N/A');
                formDataToSheet.append('বিকাশ ট্রানজেকশন আইডি', selectedPaymentMethodValue === 'বিকাশ' ? bkashTrxIdInput.value.trim() : 'N/A');

                fetch(SCRIPT_URL, { method: 'POST', body: formDataToSheet})
                .then(response => {
                    if (!response.ok) return response.text().then(text => { throw new Error(`সার্ভার ত্রুটি ${response.status}: ${text}`) });
                    return response.json();
                })
                .then(data => {
                    if (data && data.result === 'success') {
                        alert(data.message || 'আপনার অর্ডার সফলভাবে প্লেস করা হয়েছে।');
                        orderForm.reset();
                        document.querySelectorAll('.product-options .product-item input[type="checkbox"]').forEach(cb => cb.checked = false);
                        document.querySelectorAll('.product-options .product-item .quantity-input').forEach(inp => inp.value = 1);
                        handlePaymentMethodChange(); 
                        updateOrderSummary(); 
                    } else {
                        throw new Error(data.error_message || data.error || 'ফর্ম সাবমিট করতে অজানা সমস্যা হয়েছে।');
                    }
                })
                .catch(error => {
                    console.error('Error submitting form:', error);
                    alert('দুঃখিত, আপনার অর্ডারটি প্লেস করা যায়নি। বিস্তারিত: ' + error.message);
                })
                .finally(() => {
                    submitOrderBtn.disabled = false;
                    loaderOverlay.classList.remove('active');
                });
            });

            document.getElementById('copyrightText').textContent = `Copyright © ${new Date().getFullYear()} amm rupali। সর্বস্বত্ব সংরক্ষিত।`;
        }); // End of DOMContentLoaded

        function updateOrderSummary() {
            const cartItemsTableBody = document.getElementById('cartItems');
            const subtotalAmountEl = document.getElementById('subtotalAmount');
            const shippingAmountEl = document.getElementById('shippingAmount');
            const totalAmountEl = document.getElementById('totalAmount');
            const bkashTotalAmountEl = document.getElementById('bkashTotalAmount'); 

            let subtotal = 0;
            let totalWeightKg = 0; 

            if (!cartItemsTableBody) return;
            cartItemsTableBody.innerHTML = '';

            document.querySelectorAll('.product-options .product-item').forEach(item => {
                const checkbox = item.querySelector('input[type="checkbox"]');
                const quantityInput = item.querySelector('.quantity-input');
                const minusBtn = item.querySelector('.minus-btn');
                const plusBtn = item.querySelector('.plus-btn');

                if (checkbox.checked) {
                    quantityInput.readOnly = false; 
                    minusBtn.disabled = false;
                    plusBtn.disabled = false;

                    let quantity = parseInt(quantityInput.value); 
                    if (isNaN(quantity) || quantity < 1) { quantity = 1; quantityInput.value = 1; }
                    minusBtn.disabled = (quantity <= 1);

                    const price = parseFloat(item.dataset.price);
                    const weightPerUnit = parseFloat(item.dataset.weightKg) || 1; 
                    const productName = checkbox.dataset.productName || item.querySelector('.product-title').textContent;
                    
                    const itemTotalValue = price * quantity;
                    subtotal += itemTotalValue;
                    
                    const itemTotalWeight = quantity * weightPerUnit; 
                    totalWeightKg += itemTotalWeight; 

                    const row = cartItemsTableBody.insertRow();
                    row.insertCell(0).textContent = `${productName} × ${quantity}`;
                    row.insertCell(1).textContent = `৳${itemTotalValue.toFixed(2)}`;
                } else {
                    quantityInput.readOnly = true;
                    minusBtn.disabled = true;
                    plusBtn.disabled = true;
                }
            });

            let shippingCost = 0;
            const checkedShippingRadio = document.querySelector('input[name="শিপিং পদ্ধতি"]:checked');
            if (checkedShippingRadio) {
                const shippingMethod = checkedShippingRadio.value;
                if (shippingMethod === "হোম ডেলিভারি") {
                    if (totalWeightKg > 0) {
                        const numberOfBlocks = Math.ceil(totalWeightKg / 11);
                        shippingCost = numberOfBlocks * 120;
                    }
                } else if (shippingMethod === "কুরিয়ার অফিস ডেলিভারي") {
                    shippingCost = 0; 
                }
            }
            
            const total = subtotal + shippingCost;
            if(subtotalAmountEl) subtotalAmountEl.textContent = `৳${subtotal.toFixed(2)}`;
            if(shippingAmountEl) shippingAmountEl.textContent = `৳${shippingCost.toFixed(2)}`;
            if(totalAmountEl) totalAmountEl.textContent = `৳${total.toFixed(2)}`;
            
            if (bkashTotalAmountEl && document.getElementById('bkashPaymentDetails').style.display === 'block') {
                bkashTotalAmountEl.textContent = `৳${total.toFixed(2)}`;
            }
        }
    </script>
</body>
</html>